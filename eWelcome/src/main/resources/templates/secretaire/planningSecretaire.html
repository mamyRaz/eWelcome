
<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<title>Planning</title>

        <link rel="stylesheet" href="https://adminlte.io/themes/AdminLTE/bower_components/Ionicons/css/ionicons.min.css">

        <link rel="stylesheet" href="https://adminlte.io/themes/AdminLTE/dist/css/AdminLTE.min.css">
        <link rel="stylesheet" href="https://adminlte.io/themes/AdminLTE/dist/css/skins/skin-blue.min.css">
</head>
<body>
            <div class="box header bg-blue">
                 <h3 class="box-title"><center> Planning Secretaire</center> </h3>
            </div>
            <p>
                                      
            </p>
            <p>

            </p>
            <p>

            </p>
            <div>
                <div class="card">
                    <h3 class="card-header" id="monthAndYear"></h3>
                    <table class="table table-bordered table-responsive-sm" id="calendar">
                        <thead>
                        <tr> <!--ECRITURE JOURS DE LA SEMAINES DANS LE CALENDIER-->
                            <th>Dimanche</th>
                            <th>Lundi</th>
                            <th>Mardi</th>
                            <th>Mercredi</th>
                            <th>Jeudi</th>
                            <th>Vendredi</th>
                            <th>Samedi</th>
                        </tr>
                        </thead>

                        <tbody id="calendar-body">

                        </tbody>
                    </table>

                    <div class="form-inline">

                        <button class="btn btn-outline-primary col-sm-6" id="previous" onclick="previous()">Precedent</button>

                        <button class="btn btn-outline-primary col-sm-6" id="next" onclick="next()">Suivant</button>
                    </div>
                    <br/>
                    <form class="form-inline">
                        <label class="lead mr-2 ml-2" for="month">Aller au: </label>
                        <select class="form-control col-sm-4" name="month" id="month" onchange="jump()"><!--OPTIONS DU MOIS VERS LEQUEL-->
                            <option value=0>Janvier</option>                                            <!-- ON IRA-->
                            <option value=1>Fevrier</option>
                            <option value=2>Mars</option>
                            <option value=3>Avril</option>
                            <option value=4>Mai</option>
                            <option value=5>Juin</option>
                            <option value=6>Juillet</option>
                            <option value=7>Aout</option>
                            <option value=8>Septembre</option>
                            <option value=9>Octobre</option>
                            <option value=10>Novembre</option>
                            <option value=11>Decembre</option>
                        </select>


                        <label for="year"></label><select class="form-control col-sm-4" name="year" id="year" onchange="jump()">

                        <option value=2019>2019</option>        <!--OPTIONS DE L'ANNEE VERS LAQUELLE-->
                        <option value=2020>2020</option>        <!-- ON IRA-->
                        <option value=2021>2021</option>
                        <option value=2022>2022</option>
                        <option value=2023>2023</option>
                        <option value=2024>2024</option>
                        <option value=2025>2025</option>
                        <option value=2026>2026</option>
                        <option value=2027>2027</option>
                        <option value=2028>2028</option>
                        <option value=2029>2029</option>
                        <option value=2030>2030</option>
                    </select></form>
                </div>
            </div>
            <script src="scripts.js"></script>
            <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
                    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
                    crossorigin="anonymous">                
            </script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"
                    integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ"
                    crossorigin="anonymous">                
            </script>
            <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"
                    integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"
                    crossorigin="anonymous">                
            </script>
            <script>    // LES TROIS LIGNES DE COMMENTAIRE RAPPORTE DES BUGGS AU PROGRAMME POUR RAISON IGNOREE 
                        // POUR L'INSTANT C'EST POURQUOI PU AFFICHER LES RENDEZ-VOUS DANS LE CALENDRIER
                //th:inline="javascript"
                //var m = [[${meetings}]];
                //console.log(m);
                let today = new Date();
                let currentMonth = today.getMonth();
                let currentYear = today.getFullYear();
                let selectYear = document.getElementById("year");
                let selectMonth = document.getElementById("month");

                let months = ["Janvier", "Fevrier", "Mars", "Avril", "Mai", "Juin", "Juillet", "Aout", "Septembre", "Octobre", "Novembre", "Decembre"];


                let monthAndYear = document.getElementById("monthAndYear");
                showCalendar(currentMonth, currentYear);

                //CANGER LE MOIS AFFICHE SI ON ARRIVE AU MOIS DE DECEMBRE , ON AFFICHE JANVIER
                function next() {
                    currentYear = (currentMonth === 11) ? currentYear + 1 : currentYear;
                    currentMonth = (currentMonth + 1) % 12;
                    showCalendar(currentMonth, currentYear);
                }

                //CANGER LE MOIS AFFICHE SI ON EST AU MOIS DE JANVIER , ON AFFICHE DECEMBRE
                function previous() {
                    currentYear = (currentMonth === 0) ? currentYear - 1 : currentYear;
                    currentMonth = (currentMonth === 0) ? 11 : currentMonth - 1;
                    showCalendar(currentMonth, currentYear);
                }

                //CANGER LE MOIS ET L'ANNEE AFFICHES 
                function jump() {
                    currentYear = parseInt(selectYear.value);
                    currentMonth = parseInt(selectMonth.value);
                    //PUIS AFFICHER LE CALENDRIER
                    showCalendar(currentMonth, currentYear);
                }

                //AFFICHAGE DU CALENDRIER
                function showCalendar(month, year) {
                    //INITIALISER LE JOUR MINIMUM
                    let firstDay = (new Date(year, month)).getDay();
                    //INITIALISER LE JOUR MAXIMUM
                    let daysInMonth = 32 - new Date(year, month, 32).getDate();

                    let tbl = document.getElementById("calendar-body"); 
                    tbl.innerHTML = "";

                    monthAndYear.innerHTML = months[month] + " " + year;//AFFICHAGE MOIS ET ANNEE
                    selectYear.value = year;
                    selectMonth.value = month;

                    let date = 1;
                    for (let i = 0; i < 6; i++) {//PARCOUR DES LIGNES DU CALENDIRE CHAQUE MOIS EST ETALE SUR MAX 5SEMAINES 
                                                    //PLUS LA LIGNE D'AFFICHAGE DES JOURS DE  LA SEMAINE
                        let row = document.createElement("tr");

                        for (let j = 0; j < 7; j++) {//PARCOUR DES JOURS DE LA SEMAINE ET  REMPLISSAGE DES CASES
                            if (i === 0 && j < firstDay) {
                                let cell = document.createElement("td");
                                let cellText = document.createTextNode("");
                                cell.appendChild(cellText);
                                row.appendChild(cell);
                            }
                            else if (date > daysInMonth) {
                                break;
                            }
                            else {
                                let cell = document.createElement("td");
                                let cellText = document.createTextNode(date+"............"); // POUR L'INSTANT LES CASES SONT REMPLIES QUE
                                                                                             // DE  LA DATE DU JOUR
                                if (date === today.getDate() && year === today.getFullYear() && month === today.getMonth()) {
                                    cell.classList.add("bg-info");
                                }
                                cell.appendChild(cellText);
                                row.appendChild(cell);
                                date++;
                            }
                        }
                        tbl.appendChild(row); 
                    }

                }
            </script>
            <p>
                                      
            </p>
            <p>

            </p>
            <p>

            </p>
            <div class="box box-solid box-primary" >
            <div class="box header bg-blue">
                <h3 class="box-title"><center> Liste de rendez-vous </center> </h3>
            </div>
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">Date</th>
                        <th scope="col">Heure de la visite</th>
                        <th scope="col">Personne visitante</th>
                        <th scope="col">Type</th>
                        <th scope="col">Commentaires</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="meeting : ${meetings}">
                        <td th:text="${meeting.dateMeeting}"></td>
                        <td th:text="${meeting.hour}"></td>
                        <td th:text="${meeting.meetingHost.person.lastName + ' ' + meeting.meetingHost.person.firstName}"></td>
                        <td th:text="${meeting.typeMeeting}"></td>
                        <td th:text="${meeting.comments}"></td>
                    </tr>
                </tbody>
            </table>
        </div><!-- -->
            <p>

            </p>
            <p>

            </p>

            <a class="btn btn-warning" href="/connexion" role="button">Accueil</a>
</body>
</html>